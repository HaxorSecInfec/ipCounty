
<div align="center"><h1>ipCountry - IPTABLES BLOCK COUNTRY</h1></h1></div>
<p align="center">
	<img src="https://img.shields.io/badge/SHELL-all-blue">
	<img src="https://img.shields.io/badge/LICENSE-MIT-lime">
	<img src="https://img.shields.io/badge/Version-1.2.1-darkred">
</p>

Summary
----------

ipCountry
is a tool to block all country traffic and only leave Indonesia and US countries

created by Haxorsec for analyst education

Requirements
--------
* IPSET
* IPTABLES

#### Run
```
root@HaxorSec:~# bash ipCountry
[+] Detecting distribution...
[+] Checking dependencies...
== ipCountry - HaxorSec ==
Your Ip SSH : 22
[+] Downloading IP List from: https://raw.githubusercontent.com/HaxorSecInfec/ipCounty/refs/heads/main/indonesia.txt
--2025-03-21 02:56:44--  https://raw.githubusercontent.com/HaxorSecInfec/ipCounty/refs/heads/main/indonesia.txt
Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 185.199.109.133, 185.199.111.133, 185.199.110.133, ...
Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|185.199.109.133|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 121740 (119K) [text/plain]
Saving to: ‘indonesia.txt’

indonesia.txt                                                       100%[================================================================================================================================================================>] 118.89K  --.-KB/s    in 0.02s

2025-03-21 02:56:44 (4.99 MB/s) - ‘indonesia.txt’ saved [121740/121740]

[+] Downloading IP List from: https://raw.githubusercontent.com/HaxorSecInfec/ipCounty/refs/heads/main/google.txt
--2025-03-21 02:56:44--  https://raw.githubusercontent.com/HaxorSecInfec/ipCounty/refs/heads/main/google.txt
Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 185.199.109.133, 185.199.108.133, 185.199.111.133, ...
Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|185.199.109.133|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 532 [text/plain]
Saving to: ‘google.txt’

google.txt                                                          100%[================================================================================================================================================================>]     532  --.-KB/s    in 0s

2025-03-21 02:56:44 (25.0 MB/s) - ‘google.txt’ saved [532/532]

[+] Flushing Iptables Rules
[+] Set Default policies
[+] Allow Localhost traffic
[+] Allow incoming SSH
[+] Create ipset for Indonesian, And Google IP ranges with increased hash size
[+] Allowing DNS (port 53)
[+] Adding IPs from indonesia.txt to ipset indonesia
[+] All IPs from indonesia.txt added to indonesia
[+] Adding IPs from google.txt to ipset google
[+] All IPs from google.txt added to google
[+] Allow HTTP (port 80) and HTTPS (port 443) from Indonesian IP
[+] Allow HTTP (port 80) and HTTPS (port 443) from Google IP
[+] Block HTTP/HTTPS from all other IPs
[+] Save ipset
# Generated by iptables-save v1.8.7 on Fri Mar 21 02:56:54 2025
*filter
:INPUT ACCEPT [5:260]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [304:689804]
-A INPUT -i lo -j ACCEPT
-A INPUT -p tcp -m tcp --dport 22 -j ACCEPT
-A INPUT -p udp -m udp --dport 53 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 80 -m set --match-set indonesia src -j ACCEPT
-A INPUT -p tcp -m tcp --dport 443 -m set --match-set indonesia src -j ACCEPT
-A INPUT -p tcp -m tcp --dport 80 -m set --match-set google src -j ACCEPT
-A INPUT -p tcp -m tcp --dport 443 -m set --match-set google src -j ACCEPT
-A INPUT -p tcp -m tcp --dport 80 -j REJECT --reject-with icmp-port-unreachable
-A INPUT -p tcp -m tcp --dport 443 -j REJECT --reject-with icmp-port-unreachable
-A OUTPUT -o lo -j ACCEPT
-A OUTPUT -p udp -m udp --sport 53 -j ACCEPT
-A OUTPUT -p tcp -m tcp --dport 80 -j ACCEPT
-A OUTPUT -p tcp -m tcp --dport 443 -j ACCEPT
COMMIT
# Completed on Fri Mar 21 02:56:54 2025
[+] Firewall configured successfully. SSH allowed from anywhere, HTTP/HTTPS only from Indonesia, Google, and Cloudflare IPs.
```
Before
--------
<img src="https://raw.githubusercontent.com/HaxorSecInfec/ipCounty/refs/heads/main/screenshot/sample.jpg">

After
--------
<img src="https://raw.githubusercontent.com/HaxorSecInfec/ipCounty/refs/heads/main/screenshot/sample1.jpg">

Preview
--------
<img src="https://raw.githubusercontent.com/HaxorSecInfec/ipCounty/refs/heads/main/screenshot/screen.png">

#### important!
If there is an error in this SCRIPT, please contribute with us.

## Disclaimer

This repository is for educationnal purposes only.
Malicious usage of this repository will not hold the author responsible.
Do not pentest without explicit permissions.
